<head>
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
      inlineMath: [['$','$']]
      }
    });
  </script>
</head>

## [MainPage](../../../index.md)/[DataBase](../../README.md)/Lab 2

<center>
<p>Университет ИТМО</p>
<p>Факультет ФПИ и КТ</p>
<br><br><br><br><br>
<h2>Отчёт по лабораторной работе 2</h2>
<h1>«Информационная система и база данных»</h1>
<h3>Вариант: 310930</h3>
</center>

<br><br><br><br><br><br><br><br><br><br><br><br>

<div align="right">Студент: Чжоу Хунсян</div>
<div align="right">Группа: P33131</div>
<div align="right">Преподаватель:</div>

- [1 Текст задания.](#1-текст-задания)
- [2 DataBase](#2-database)
  - [Инфологическая модель](#инфологическая-модель)
  - [Даталогическая модель](#даталогическая-модель)
- [3 Функциональные зависимости для отношений полученной схемы (минимальное множество)](#3-функциональные-зависимости-для-отношений-полученной-схемы-минимальное-множество)
  - [charaters](#charaters)
  - [events](#events)
  - [locations](#locations)
  - [status](#status)
  - [groups](#groups)
  - [group\_member](#group_member)
  - [relations](#relations)
  - [actions](#actions)
  - [movements](#movements)
- [4 Отношения в 3NF.](#4-отношения-в-3nf)
- [5 Отношения в BCNF](#5-отношения-в-bcnf)
- [6 Денормализация](#6-денормализация)
- [7 Выводы](#7-выводы)

# 1 Текст задания.

**Задание.**

По варианту, выданному преподавателем, составить и выполнить запросы к базе данных "Учебный процесс".  
根据教师给出的选项，编写并执行对“教育过程（Учебный процесс）”数据库的查询。

Команда для подключения к базе данных `ucheb`:  
连接 `ucheb` 数据库的命令：

```psql -h pg -d ucheb```

**Отчёт по лабораторной работе должен содержать:**  
**实验室报告必须包含：**
- Текст задания. 任务文本
- Реализацию запросов на SQL. 在 SQL 中执行查询
- Выводы по работе. 对工作的结论。

**Темы для подготовки к защите лабораторной работы:**  
**为实验室工作答辩准备的主题：**
- SQL
- Соединение таблиц 连接表
- Подзапросы 子查询

Составить запросы на языке SQL (пункты 1-7).

1. Сделать запрос для получения атрибутов из указанных таблиц, применив фильтры по указанным условиям:  
   发出请求从指定表中获取属性，根据指定条件应用过滤器：  
   Н_ТИПЫ_ВЕДОМОСТЕЙ, Н_ВЕДОМОСТИ.  
   Вывести атрибуты: Н_ТИПЫ_ВЕДОМОСТЕЙ.НАИМЕНОВАНИЕ, Н_ВЕДОМОСТИ.ДАТА.  
   显示属性：N_TYPES_NAMES.NAME、N_LISTERS.DATE。  
   Фильтры (AND):  
   过滤器（与）：
   a) Н_ТИПЫ_ВЕДОМОСТЕЙ.ИД > 1.  
   b) Н_ВЕДОМОСТИ.ДАТА < 2010-06-18.  
   c) Н_ВЕДОМОСТИ.ДАТА < 2010-06-18.  
   Вид соединения: LEFT JOIN.  
   连接类型：LEFT JOIN
2. Сделать запрос для получения атрибутов из указанных таблиц, применив фильтры по указанным условиям:  
   发出请求从指定表中获取属性，并根据指定条件应用过滤器：  
   Таблицы: Н_ЛЮДИ, Н_ОБУЧЕНИЯ, Н_УЧЕНИКИ.  
   Вывести атрибуты: Н_ЛЮДИ.ОТЧЕСТВО, Н_ОБУЧЕНИЯ.НЗК, Н_УЧЕНИКИ.ИД.  
   显示属性：N_PEOPLE.PATERNICAL、N_EDUCATION.NZK、N_STUDENTS.ID。  
   Фильтры: (AND)  
   过滤器（与）：  
   a) Н_ЛЮДИ.ОТЧЕСТВО > Владимирович.  
   b) Н_ОБУЧЕНИЯ.ЧЛВК_ИД < 113409.  
   Вид соединения: LEFT JOIN.  
   连接类型：LEFT JOIN  
3. Вывести число фамилий без учета повторений.  
   打印姓氏的个数，不考虑重复。
   При составлении запроса нельзя использовать DISTINCT.  
   编写查询时不能使用 DISTINCT。
4. Выдать различные отчества студентов и число людей с каждой из этих отчеств, ограничив список отчествами, встречающимися ровно 50 раз на ФКТИУ.  
   列出学生的各种父名以及使用这些父名的人数，将列表限制为在 ФКТИУ 恰好出现 50 次的父名。  
   Для реализации использовать соединение таблиц.  
   要实现此目的，请使用表连接。  
5. Выведите таблицу со средними оценками студентов группы 4100 (Номер, ФИО, Ср_оценка), у которых средняя оценка больше максимальной оценк(е|и) в группе 1101.  
   显示一个表格，其中包含 4100 组中学生的平均成绩（编号、全名、平均成绩），其平均成绩大于 1101 组中的最高成绩。
6. Получить список студентов, отчисленных ровно первого сентября 2012 года с очной или заочной формы обучения (специальность: Программная инженерия). В результат включить:  
   获取 2012 年 9 月 1 日当天被全日制或非全日制学习（专业：软件工程）开除的学生名单。 结果包括：  
   номер группы;   
   组号；  
   номер, фамилию, имя и отчество студента;  
   学生的编号、姓氏、名字和父名；  
   номер пункта приказа;  
   订单商品编号；  
   Для реализации использовать подзапрос с EXISTS.   
   要实现此目的，请使用带有 EXISTS 的子查询。  
7. Вывести список людей, не являющихся или не являвшихся студентами СПбГУ ИТМО (данные, о которых отсутствуют в таблице Н_УЧЕНИКИ). В запросе нельзя использовать DISTINCT.  
   显示现在不是或曾经不是圣彼得堡国立大学 ITMO 学生的人员列表（STUDENTS 表中没有相关数据）。 您不能在查询中使用 DISTINCT。
