# Архитектура компьютера

## Лекция 3

## Архитектура. Ещё не компьютеры. Решение задач компьютеров без компьютеров

Пенской А.В., 2022

----

## План лекции

- Понятие архитектуры
- Почему архитектура -- это так важно?
- Ещё не компьютеры. Решение задач компьютеров без компьютеров
    - Арифмометр и логарифмическая линейка.
    - Расчёт артиллерийских таблиц.
    - Жаккардовый ткацкий станок.
    - Странное.

---

## Архитектура

![](../fig/geek-and-pole-architecture.jpg)<!-- .element: height="600px" -->

----

### Классическое определение: Гради Буч

Архитектура -- логическая и физическая структура компонентов системы и их взаимосвязи, сформированные всеми стратегическими и тактическими проектными решениями, применяемыми во время разработки.

*Логический взгляд* на систему учитывает концепции, созданные в концептуальной модели, и устанавливает существование и роль ключевых абстракций и механизмов, которые будут определять архитектуру и общий дизайн системы.

*Физическая модель* системы описывает конкретный программный и аппаратный состав реализации системы. Очевидно, что физическая модель зависит от конкретной технологии.

----

### Системно-инженерное определение: ISO 42010

Архитектура (системы) -- фундаментальные концепции или свойства системы в ее среде, воплощенные в ее элементах, взаимосвязях и принципах ее проектирования и развития

Описание архитектуры -- рабочий продукт, используемый для воплощения архитектуры

----

### Сущностные определения

Архитектура -- все важное

--- Интернет

Software architecture (en) is the set of design decisions which, if made incorrectly, may cause your project to be cancelled.

--- Eoin Woods (SEI 2010)

Архитектура программного обеспечения (ru) -- это набор проектных решений, которые, если они будут приняты неправильно, могут привести к отмене вашего проекта.

--- Eoin Woods (SEI 2010)

---

## Почему архитектура -- это так важно?

### V-диаграмма

![](../fig/v-model.png)

----

### Риск откладывания управления рисков

![](../fig/risk-of-delaying-risk-management.png)

----

### Эффект архитектурного проектирования

![](../fig/schedule-overrun-from-amount-of-design.png)

---

<div class="row"><div class="col">

## Примеры ошибок

Выше были теоретические рассуждения.

Теперь несколько примеров из практики.

</div><div class="col">

![](../fig/geek-and-poke-fail.png)<!-- .element: height="600px" -->

</div></div>

----

### Пример проблем с операционным окружением

![](../fig/controller-right2left.png)

----

Подсказка:

![](../fig/controller-right2left-2.png)

Notes: На столе разработчика -- силовые линии лучше увести со стола вверх. В шкафу -- вниз, т.к. техника безопасности.

----

### Пример с коммуникацией между стадиями жизненного цикла

![](../fig/angle-marks.png)

----

Подсказка:

![](../fig/angle-marks-2.png)

Notes: План: вырезать на лазере. Синие точки -- отверстия в качестве маркировки уголка. Делали руками, замучились отмерять.

----

### Пример о следовании стандартам

Из описания формата JSON:

<div class="row"><div class="col">

```text
number 
    integer fraction exponent 

integer 
    digit
    onenine digits 
    '-' digit 
    '-' onenine digits 

digits 
    digit 
    digit digits 

digit 
    '0' 
    onenine 
```

</div><div class="col">

```text
onenine 
    '1' . '9' 

fraction 
    "" 
    '.' digits
    
exponent 
    "" 
    'E' sign digits 
    'e' sign digits
```

</div></div>

Что такое number?

----

#### Что такое number в JSON?

`number` может быть: short, int, long, big-int, float, double

##### Контекст

- JavaScript -- старая экосистема, разработанная для автоматизации веба на коленке.
    - Следствие: работа с `number` как с `long` в большинстве решений.
- Haskell -- язык, сделанный любителями и профессионалами от математики.
    - Следствие 1: есть `Integer` без ограничения диапазона значений.
    - Следствие 2: библиотека Aeson (стандарт для работы с JSON) интерпретирует `number` как `Integer`.
- Crypto & Blockchain mess -- активное использование ключей.
    - Следствие: числа в 256 бит не предел.

----

##### Проблема

- Передача JSON из Haskell в веб.
- Сериализация `Integer` в `number` формирует очень длинное число, которое парсится в `long`.
- Hash перестаёт совпадать.

##### Решение

- предобработка текста JSON с заменой всех больших `number` на специальную строку;
- постобработка структуры с JSON с возвращением всех `number` к истинным значениям.

---

## Ещё не компьютеры <br/> Решение задач компьютеров без компьютеров

Почему это полезно:

- Во-первых, это красиво.
- Проблема абстрактных облаков и чистых IT-шников.
- Перенос технических приёмов и механизмов в современные компьютерные системы.
- Потребность в разработке компьютеров не в электронном базисе (пример: [NASA завершило конкурс на создание датчиков для венерианского ровера](https://nplus1.ru/news/2020/07/13/venus-rover-winners)).

---

### Арифмометр. <br/> Логарифмическая линейка и Ко

<div class="row"><div class="col">

#### Арифмометр

Сложное устройство, позволяющее складывать, вычитать, умножать и делить с фиксированным количеством разрядов.

Принципы расчёта воплощены в механизмах устройства.

Расчёт производится по шагам (алгоритмически), с учётом переноса между разрядами.

</div><div class="col">

![](../fig/arithmometer.jpg)

</div></div>

----

#### Логарифмическая линейка и Ко

Устройство, позволяющее выполнять несколько математических операций: умножение, деление, возведение в степень (квадрат и куб), вычисление  корней (квадрат и куб), логарифмов, вычисление тригонометрических и гиперболических функций, и т.п.

Принцип расчёта -- воплощение таблицы значений в виде, позволяющем быстро находить нужные зависимости.

Расчёт производится путём выставления линейки в требуемое положение (возможно, в несколько приёмов) и считывания результата.

![](../fig/sliderule.jpg)

----

##### Линейка и операция деления

![](../fig/sliderule-div.jpg)

----

##### Номограмма и операции умножения

![](../fig/nomogramme-mobius-action.png)

----

#### Ключевое отличие арифмометра и логарифмической линейки

<div>

- Линейка, как воплощение таблицы, содержит в себе все возможные значения.
- Рост области определения функций:
    - для арифмометра: медленный рост сложности устройства, средний рост длительности расчёта (зависит от функции);
    - для линейки: быстрый рост размера линейки, минимальный рост длительности расчёта.
- Линейка -- аналоговое устройство.
- Арифмометр -- цифровое устройство.

</div>

----

На практике:

- Арифмометр -- современный вычислитель на устаревшей элементной базе.
- Линейки -- алгоритмы расчётов с применением таблиц (полностью табличный расчёт, частичный расчёт по таблицам), квантовые компьютеры (НЕ РАЗБИРАЮСЬ, МОГУ ОБМАНУТЬ!).
