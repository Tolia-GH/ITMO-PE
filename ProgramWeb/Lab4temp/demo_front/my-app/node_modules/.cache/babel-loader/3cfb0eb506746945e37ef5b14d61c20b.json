{"ast":null,"code":"var _jsxFileName = \"/Users/2398768715qq.com/Documents/GitHub/ITMO-PE/ProgramWeb/Lab4temp/demo_front/my-app/src/components/login/login.jsx\";\nimport React from \"react\";\nimport $ from 'jquery';\nimport { createBrowserHistory } from \"history\";\nimport PropTypes from 'prop-types';\nimport { getPassword, getUsername } from \"../reduxStore/action/action\";\nimport { connect } from \"react-redux\";\nimport '../../assets/css/user_entry.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Login extends React.Component {\n  render() {\n    const {\n      password,\n      username,\n      setPassword,\n      setUsername,\n      login,\n      toRegister\n    } = this.props;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form_field\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        id: \"login_form\",\n        className: \"form-horizontal\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"col-xs-2 col-sm-1\",\n            children: \"Username:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 16,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-xs-10 col-sm-2\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"form-control\",\n              type: \"text\",\n              value: username,\n              onChange: setUsername\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 20,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 19,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 15,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"col-xs-2 col-sm-1\",\n            children: \"Password:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 24,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-xs-10 col-sm-2\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"form-control\",\n              type: \"password\",\n              value: password,\n              onChange: setPassword\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 28,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 27,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 23,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => login(username, password),\n            className: \"col-xs-2 col-sm-1 .btn-primary margin_but\",\n            children: \"Log in\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 32,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => toRegister(),\n            className: \"col-xs-2 col-sm-1 .btn-primary\",\n            children: \"register\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 33,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 31,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 14,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nLogin.propTypes = {\n  username: PropTypes.string.isRequired,\n  password: PropTypes.string.isRequired,\n  setPassword: PropTypes.func.isRequired,\n  setUsername: PropTypes.func.isRequired,\n  login: PropTypes.func.isRequired,\n  toRegister: PropTypes.func.isRequired\n};\n\nfunction mapStateToProps(state) {\n  return {\n    username: state.dot.username,\n    password: state.dot.password\n  };\n}\n\nfunction sendAccount(username, password) {\n  $.ajax({\n    url: \"api/main\",\n    method: \"POST\",\n    data: {\n      password: password,\n      username: username\n    },\n    async: false,\n    success: function (res) {\n      if (res.success) {\n        window.sessionStorage.setItem(\"username\", username);\n        window.sessionStorage.setItem(\"password\", password);\n        const history = createBrowserHistory();\n        history.push('/main');\n      } else {\n        //dispatch(clearAccount());\n        alert(res.message);\n      }\n    }\n  });\n}\n\nfunction doDispatchToProps(dispatch) {\n  return {\n    setUsername: event => dispatch(getUsername(event.target.value)),\n    setPassword: event => dispatch(getPassword(event.target.value)),\n    login: (username, password) => {\n      sendAccount(username, password, dispatch);\n    },\n    toRegister: () => {\n      const history = createBrowserHistory();\n      history.push('/register');\n    }\n  };\n}\n\nexport const LoginPage = connect(mapStateToProps, doDispatchToProps)(Login);","map":{"version":3,"sources":["/Users/2398768715qq.com/Documents/GitHub/ITMO-PE/ProgramWeb/Lab4temp/demo_front/my-app/src/components/login/login.jsx"],"names":["React","$","createBrowserHistory","PropTypes","getPassword","getUsername","connect","Login","Component","render","password","username","setPassword","setUsername","login","toRegister","props","propTypes","string","isRequired","func","mapStateToProps","state","dot","sendAccount","ajax","url","method","data","async","success","res","window","sessionStorage","setItem","history","push","alert","message","doDispatchToProps","dispatch","event","target","value","LoginPage"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport $ from 'jquery';\nimport {createBrowserHistory} from \"history\";\nimport PropTypes from 'prop-types';\nimport {getPassword,getUsername} from \"../reduxStore/action/action\";\nimport {connect} from \"react-redux\";\nimport '../../assets/css/user_entry.css';\n\nclass Login extends React.Component {\n    render() {\n        const {password,username,setPassword,setUsername,login,toRegister}=this.props;\n        return (\n            <div className={\"form_field\"}>\n                <form id={\"login_form\"} className={\"form-horizontal\"}>\n                    <div className={\"form-group\"}>\n                        <label className={\"col-xs-2 col-sm-1\"}>\n                            Username:\n                        </label>\n                        <div className={\"col-xs-10 col-sm-2\"}>\n                            <input className={\"form-control\"} type=\"text\" value={username} onChange={setUsername}/>\n                        </div>\n                    </div>\n                    <div className={\"form-group\"}>\n                        <label className={\"col-xs-2 col-sm-1\"}>\n                            Password:\n                        </label>\n                        <div className={\"col-xs-10 col-sm-2\"}>\n                            <input className={\"form-control\"} type=\"password\" value={password} onChange={setPassword}/>\n                        </div>\n                    </div>\n                    <div>\n                        <button onClick={()=>login(username,password)} className={\"col-xs-2 col-sm-1 .btn-primary margin_but\"}>Log in</button>\n                        <button onClick={()=>toRegister()} className={\"col-xs-2 col-sm-1 .btn-primary\"}>register</button>\n                    </div>\n                </form>\n            </div>\n\n        );\n    }\n}\nLogin.propTypes={\n    username:PropTypes.string.isRequired,\n    password:PropTypes.string.isRequired,\n    setPassword:PropTypes.func.isRequired,\n    setUsername:PropTypes.func.isRequired,\n    login:PropTypes.func.isRequired,\n    toRegister:PropTypes.func.isRequired\n}\nfunction mapStateToProps(state){\n    return(\n        {\n            username:state.dot.username,\n            password:state.dot.password\n        }\n    )\n}\nfunction sendAccount(username,password){\n    $.ajax({\n            url: \"api/main\",\n            method:\"POST\",\n            data:{\n                password: password,\n                username: username\n            },\n            async:false,\n            success:function (res){\n                if(res.success){\n                    window.sessionStorage.setItem(\"username\",username);\n                    window.sessionStorage.setItem(\"password\",password);\n                    const history = createBrowserHistory();\n                    history.push('/main');\n                }else {\n                    //dispatch(clearAccount());\n                    alert(res.message);\n                }\n            }\n        }\n    );\n}\nfunction doDispatchToProps(dispatch){\n    return({\n        setUsername:(event)=>dispatch(getUsername(event.target.value)),\n        setPassword:(event)=>dispatch(getPassword(event.target.value)),\n        login:(username,password)=>{\n            sendAccount(username,password,dispatch);\n        },\n        toRegister:()=>{\n            const history = createBrowserHistory();\n            history.push('/register');\n        }\n    })\n}\nexport const LoginPage = connect(mapStateToProps,doDispatchToProps)(Login);"]},"metadata":{},"sourceType":"module"}