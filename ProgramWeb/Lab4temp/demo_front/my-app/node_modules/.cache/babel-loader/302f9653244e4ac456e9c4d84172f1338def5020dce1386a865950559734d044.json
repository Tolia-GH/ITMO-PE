{"ast":null,"code":"var _jsxFileName = \"/Users/2398768715qq.com/Documents/GitHub/web_lab4/demo_front/my-app/src/components/login/login.jsx\";\nimport React from \"react\";\nimport $ from 'jquery';\nimport { createBrowserHistory } from \"history\";\nimport PropTypes from 'prop-types';\nimport { getPassword, getUsername } from \"../reduxStore/action/action\";\nimport { connect } from \"react-redux\";\nimport '../../assets/css/addtional.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass Login extends React.Component {\n  render() {\n    const {\n      password,\n      username,\n      setPassword,\n      setUsername,\n      login,\n      toRegister\n    } = this.props;\n    return /*#__PURE__*/_jsxDEV(\"form\", {\n      id: \"login_form\",\n      className: \"form-horizontal\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"col-xs-2 col-sm-1\",\n          children: \"Name:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 15,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-xs-10 col-sm-2\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-control\",\n            type: \"text\",\n            value: username,\n            onChange: setUsername\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 19,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 18,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 14,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"col-xs-2 col-sm-1\",\n          children: \"Password:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 23,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-xs-10 col-sm-2\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-control\",\n            type: \"password\",\n            value: password,\n            onChange: setPassword\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 27,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 26,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 22,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => login(username, password),\n          className: \"col-xs-2 col-sm-1 .btn-primary margin_but\",\n          children: \"Log in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 31,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => toRegister(),\n          className: \"col-xs-2 col-sm-1 .btn-primary\",\n          children: \"register\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 13\n    }, this);\n  }\n}\nLogin.propTypes = {\n  username: PropTypes.string.isRequired,\n  password: PropTypes.string.isRequired,\n  setPassword: PropTypes.func.isRequired,\n  setUsername: PropTypes.func.isRequired,\n  login: PropTypes.func.isRequired,\n  toRegister: PropTypes.func.isRequired\n};\nfunction mapStateToProps(state) {\n  return {\n    username: state.dot.username,\n    password: state.dot.password\n  };\n}\nfunction sendAccount(username, password) {\n  $.ajax({\n    url: \"api/main\",\n    method: \"POST\",\n    data: {\n      password: password,\n      username: username\n    },\n    async: false,\n    success: function (res) {\n      if (res.success) {\n        window.sessionStorage.setItem(\"username\", username);\n        window.sessionStorage.setItem(\"password\", password);\n        const history = createBrowserHistory();\n        history.push('/main');\n      } else {\n        //dispatch(clearAccount());\n        alert(res.message);\n      }\n    }\n  });\n}\nfunction doDispatchToProps(dispatch) {\n  return {\n    setUsername: event => dispatch(getUsername(event.target.value)),\n    setPassword: event => dispatch(getPassword(event.target.value)),\n    login: (username, password) => {\n      sendAccount(username, password, dispatch);\n    },\n    toRegister: () => {\n      const history = createBrowserHistory();\n      history.push('/register');\n    }\n  };\n}\nexport const LoginPage = connect(mapStateToProps, doDispatchToProps)(Login);","map":{"version":3,"names":["React","$","createBrowserHistory","PropTypes","getPassword","getUsername","connect","jsxDEV","_jsxDEV","Login","Component","render","password","username","setPassword","setUsername","login","toRegister","props","id","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","value","onChange","onClick","propTypes","string","isRequired","func","mapStateToProps","state","dot","sendAccount","ajax","url","method","data","async","success","res","window","sessionStorage","setItem","history","push","alert","message","doDispatchToProps","dispatch","event","target","LoginPage"],"sources":["/Users/2398768715qq.com/Documents/GitHub/web_lab4/demo_front/my-app/src/components/login/login.jsx"],"sourcesContent":["import React from \"react\";\nimport $ from 'jquery';\nimport {createBrowserHistory} from \"history\";\nimport PropTypes from 'prop-types';\nimport {getPassword,getUsername} from \"../reduxStore/action/action\";\nimport {connect} from \"react-redux\";\nimport '../../assets/css/addtional.css';\n\nclass Login extends React.Component {\n    render() {\n        const {password,username,setPassword,setUsername,login,toRegister}=this.props;\n        return (\n            <form id={\"login_form\"} className={\"form-horizontal\"}>\n                <div className={\"form-group\"}>\n                    <label className={\"col-xs-2 col-sm-1\"}>\n                        Name:\n                    </label>\n                    <div className={\"col-xs-10 col-sm-2\"}>\n                    <input className={\"form-control\"} type=\"text\" value={username} onChange={setUsername}/>\n                    </div>\n                </div>\n                <div className={\"form-group\"}>\n                    <label className={\"col-xs-2 col-sm-1\"}>\n                        Password:\n                    </label>\n                    <div className={\"col-xs-10 col-sm-2\"}>\n                        <input className={\"form-control\"} type=\"password\" value={password} onChange={setPassword}/>\n                     </div>\n                </div>\n                <div>\n                    <button onClick={()=>login(username,password)} className={\"col-xs-2 col-sm-1 .btn-primary margin_but\"}>Log in</button>\n                    <button onClick={()=>toRegister()} className={\"col-xs-2 col-sm-1 .btn-primary\"}>register</button>\n                </div>\n            </form>\n        );\n    }\n}\nLogin.propTypes={\n    username:PropTypes.string.isRequired,\n    password:PropTypes.string.isRequired,\n    setPassword:PropTypes.func.isRequired,\n    setUsername:PropTypes.func.isRequired,\n    login:PropTypes.func.isRequired,\n    toRegister:PropTypes.func.isRequired\n}\nfunction mapStateToProps(state){\n    return(\n        {\n            username:state.dot.username,\n            password:state.dot.password\n        }\n    )\n}\nfunction sendAccount(username,password){\n    $.ajax({\n            url: \"api/main\",\n            method:\"POST\",\n            data:{\n                password: password,\n                username: username\n            },\n            async:false,\n            success:function (res){\n                if(res.success){\n                    window.sessionStorage.setItem(\"username\",username);\n                    window.sessionStorage.setItem(\"password\",password);\n                    const history = createBrowserHistory();\n                    history.push('/main');\n                }else {\n                    //dispatch(clearAccount());\n                    alert(res.message);\n                }\n            }\n        }\n    );\n}\nfunction doDispatchToProps(dispatch){\n    return({\n        setUsername:(event)=>dispatch(getUsername(event.target.value)),\n        setPassword:(event)=>dispatch(getPassword(event.target.value)),\n        login:(username,password)=>{\n            sendAccount(username,password,dispatch);\n        },\n        toRegister:()=>{\n            const history = createBrowserHistory();\n            history.push('/register');\n        }\n    })\n}\nexport const LoginPage = connect(mapStateToProps,doDispatchToProps)(Login);"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}