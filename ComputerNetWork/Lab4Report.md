<head>
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
      inlineMath: [['$','$']]
      }
    });
  </script>
</head>

## [MainPage](../../../index.md)/[DataBase](../../README.md)/Lab 1

<center>
<p>Университет ИТМО<br>Факультет ФПИ и КТ</p>
<br><br><br><br><br><br>
<h2>Отчёт по лабораторной работе 1</h2>
<h1>«Компьютерные сети»</h1>
</center>

<br><br><br><br><br><br><br><br><br><br>

<div align="right">Студент: Чжоу Хунсян</div>
<div align="right">Группа: P33131</div>
<div align="right">Преподаватель:</div>

<center>
<br><br>
<p>Санкт-Петербург 2024</p>
<br>
</center>

---
 
## 1. Цель и краткая характеристика работы

Цель работы – изучить структуру протокольных блоков данных, анализируя реальный трафик на компьютере студента с помощью бесплатно распространяемой утилиты Wireshark.  
这项工作的目的是通过使用免费的 Wireshark 实用程序分析学生计算机上的真实流量来研究协议数据块的结构。

В процессе выполнения домашнего задания выполняются наблюдения за передаваемым трафиком с компьютера пользователя в Интернет и в обратном направлении. Применение специализированной утилиты Wireshark позволяет наблюдать структуру передаваемых кадров, пакетов и сегментов данных различных сетевых протоколов. При выполнении УИР рекомендуется выполнить анализ последовательности команд и определить назначение служебных данных, используемых для организации обмена данными в протоколах: ARP, DNS, FTP, HTTP, DHCP.  
在做作业时，会观察从用户计算机到互联网以及相反方向的传输流量。使用专用的 Wireshark 实用程序可以观察各种网络协议传输的帧、数据包和数据段的结构。执行 URI 时，建议分析命令序列并确定用于组织协议中数据交换的服务数据的用途：ARP、DNS、FTP、HTTP、DHCP。

## 2. URL(Zhou Hongxiang)

https://zhousfive.de/

(217.160.0.33)

## 3. Выполнение работ

### 4.1. Анализ трафика утилиты ping

![]()

1. Имеет ли место фрагментация исходного пакета, какое поле на это указывает?  
   原始数据包是否存在分片，哪个字段表示？
2. Какая информация указывает, является ли фрагмент пакета последним или промежуточным?  
   哪些信息表明报文是最后分片还是中间分片？
3. Чему равно количество фрагментов при передаче ping-пакетов?  
   发送ping包时分片数是多少？
4. Построить график, в котором на оси абсцисс находится размер_пакета, а по оси ординат – количество фрагментов, на которое был разделён каждый ping-пакет.  
   构建一个图表，其中 x 轴为 packet_size，y 轴为每个 ping 数据包划分为的分段数。
5. Как изменить поле TTL с помощью утилиты ping?  
   如何使用 ping 实用程序更改 TTL 字段？
6. Что содержится в поле данных ping-пакета?  
   ping 数据包的数据字段包含什么？

### 4.2. Анализ трафика утилиты tracert (traceroute)

![]()

1. Сколько байт содержится в заголовке IP? Сколько байт содержится в поле данных?  
   IP 报头有多少字节？数据字段有多少字节？
2. Как и почему изменяется поле TTL в следующих друг за другом ICMP-пакетах tracert? Для ответа на этот вопрос нужно проследить изменение TTL при передаче по маршруту, состоящему из более чем двух хопов.  
   连续的 ICMP Tracert 数据包中的 TTL 字段如何以及为何发生变化？要回答这个问题，您需要跟踪沿包含两跳以上的路由进行传输时 TTL 的变化。
3. Чем отличаются ICMP-пакеты, генерируемые утилитой tracert, от ICMP-пакетов, генерируемых утилитой ping (см. предыдущее задание).  
   Tracert 实用程序生成的 ICMP 数据包与 ping 实用程序生成的 ICMP 数据包有何不同（请参阅上一个任务）。
4. Чем отличаются полученные пакеты «ICMP reply» от «ICMP error» и зачем нужны оба этих типа ответов?  
   收到的“ICMP 回复”数据包与“ICMP 错误”数据包有何不同？为什么需要这两种类型的响应？
5. Что изменится в работе tracert, если убрать ключ «-d»? Какой дополнительный трафик при этом будет генерироваться?  
   如果删除“-d”开关，tracert 的操作会发生什么变化？这会产生哪些额外流量？

### 4.3. Анализ HTTP-трафика

Необходимо отследить и проанализировать HTTP-трафик, создаваемый браузером при посещении Интернет-сайта, заданного по варианту. В списке захваченных пакетов необходимо проанализировать следующую пару HTTP-сообщений (запрос-ответ):  
有必要跟踪和分析浏览器访问选项指定的 Internet 站点时生成的 HTTP 流量。在捕获的数据包列表中，您需要分析以下一对HTTP消息（请求-响应）：

- GET-сообщение от клиента (браузера);  
  从客户端（浏览器）获取消息；
- ответ сервера.  
  服务器响应。

Для этого в поле с детальной информацией о пакете нужно развернуть строку «HTTP». Затем необходимо обновить страницу в браузере так, чтобы вместо «HTTP GET» был сгенерирован «HTTP CONDITIONAL GET» (так называемый «условный GET»). Условные запросы GET содержат поля If- Modified-Since, If-Match, If-Range и подобные, которые позволяют при повторном запросе не передавать редко изменяемые данные. В ответ на условный GET тело запрашиваемого ресурса передается только в том случае, если этот ресурс изменялся после даты «If-Modified-Since». Если ресурс не изменялся, сервер вернет код статуса «304 Not Modified».  
为此，在包含有关包的详细信息的字段中，您需要展开“HTTP”行。然后你需要刷新浏览器中的页面，以便生成“HTTP CONDITIONAL GET”（即所谓的“条件GET”），而不是“HTTP GET”。条件 GET 请求包含 If-Modified-Since、If-Match、If-Range 和类似字段，这使您可以避免在重复请求期间传输很少更改的数据。为了响应条件 GET，仅当该资源自“If-Modified-Since”日期以来已被修改时，才会传输所请求资源的正文。如果资源未被修改，服务器将返回“304 Not Modified”状态码。

По результатам анализа собранной трассы покажите, каким образом протокол HTTP передавал содержимое страницы при первичном посещении страницы и при вторичном запросе-обновлении от браузера (т.е. при различных видах GET-запросов).  
根据收集的跟踪分析结果，显示 HTTP 协议在初次访问页面期间以及浏览器的二次更新请求期间（即使用各种类型的 GET 请求）如何传输页面内容。

### 4.4. Анализ DNS-трафика

Необходимо отследить и проанализировать трафик протокола DNS, сгенерированный в результате выполнения следующих действий:  
您应该监控和分析由以下操作生成的 DNS 协议流量：

- настроить Wireshark-фильтр: «ip.addr == ваш_IP_адрес»;  
  配置 Wireshark 过滤器：“ip.addr == your_IP_address”；
- очистить кэш DNS с помощью команды ipconfig в командной строке: ipconfig/flushdns  
  在命令行上使用 ipconfig 命令刷新 DNS 缓存：ipconfig/flushdns
- очистить кэш браузера;  
  清除浏览器缓存；
- зайти на Интернет-сайт, заданный по варианту.  
  转至选项指定的 Internet 站点。

По результатам анализа собранной трассы, ответьте на следующие вопросы.  
根据收集的路线分析结果，回答以下问题。

1. Почему адрес, на который отправлен DNS-запрос, не совпадает с адресом посещаемого сайта?  
   为什么DNS请求发送的地址与访问站点的地址不匹配？
2. Какие бывают типы DNS-запросов?  
   DNS查询有哪些类型？
3. В какой ситуации нужно выполнять независимые DNS-запросы для получения содержащихся на сайте изображений?  
   在什么情况下您应该执行独立的 DNS 查询来检索站点上包含的图像？

### 4.5. Анализ ARP-трафика

Необходимо отследить и проанализировать трафик протокола ARP, сгенерированный в результате выполнения следующих действий:  
您应该监控和分析由以下操作生成的 ARP 流量：

- очистить ARP-таблицу командой «netsh interface ip delete arpcache» (проверить очистилась ли таблица можно с помощью команды команды «arp -a», выводящей таблицу на экран);  
  使用“netsh interface ip delete arpcache”命令清除ARP表（您可以使用“arp -a”命令检查该表是否已被清除，该命令会在屏幕上显示该表）；
- очистить кэш браузера;  
  清除浏览器缓存；
- зайти на Интернет-сайт, заданный по варианту.  
  转至选项指定的 Internet 站点。

По результатам анализа собранной трассы, ответьте на следующие вопросы.  
根据收集的路线分析结果，回答以下问题。

1. Какие МАС-адреса присутствуют в захваченных пакетах ARP-протокола? Что означают эти адреса? Какие устройства они идентифицируют?  
   捕获的ARP数据包中存在哪些MAC地址？这些地址是什么意思？他们识别什么设备？
2. Какие МАС-адреса присутствуют в захваченных HTTP-пакетах и что означают эти адреса? Что означают эти адреса? Какие устройства они идентифицируют?  
   捕获的HTTP数据包中存在哪些MAC地址以及这些地址的含义是什么？这些地址是什么意思？他们识别什么设备？
3. Для чего ARP-запрос содержит IP-адрес источника?  
   为什么ARP请求中会包含源IP地址？

### 4.6. Анализ трафика утилиты nslookup

Необходимо отследить и проанализировать трафик протокола DNS, сгенерированный в результате выполнения следующих действий:  
您应该监控和分析由以下操作生成的 DNS 协议流量：

1. Настроить Wireshark-фильтр: «ip.addr == ваш_IP_адрес».  
   设置 Wireshark 过滤器：“ip.addr == your_IP_address”。
2. Запустить в командной строке команду «nslookup адрес_сайта_по_варианту».  
   在命令行上运行命令“nslookup site_address_by_option”。
3. Дождаться отправки трёх DNS-запросов и трёх DNS-ответов (в работе нужно использовать только последние из них, т.к. первые два набора запросов/ответов специфичны для nslookup и не генерируются другими сетевыми приложениями).  
   等待发送三个 DNS 请求和三个 DNS 响应（在您的工作中，您只需要使用其中最后一个，因为前两组请求/响应是特定于 nslookup 的，不是由其他网络应用程序生成的） 。
4. Повторить предыдущие два шага, используя команду: «nslookup -type=NS имя_сайта_по_варианту».  
   使用命令“nslookup -type=NS site_name_by_option”重复前两个步骤。

По результатам анализа собранной трассы, ответьте на следующие вопросы.  
根据收集的路线分析结果，回答以下问题。

1. Чем различается трасса трафика в п.2 и п.4, указанных выше?  
   上述第2段和第4段的交通路线有什么区别？
2. Что содержится в поле «Answers» DNS-ответа?  
   DNS响应的“Anwers”字段包含什么？
3. Каковы имена серверов, возвращающих авторитативный (authoritative) отклик?  
   返回权威响应的服务器名称是什么？
