<head>
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            tex2jax: {
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
            inlineMath: [['$','$']]
            }
        });
    </script>
</head>

## [MainPage](../index.md)/[Computer NetWork](README.md)/Lab2

# Лабораторная работа №4 <br> «Анализ трафика компьютерных сетей с помощью утилиты Wireshark»

## 1. Цель и краткая характеристика работы

Цель работы – изучить структуру протокольных блоков данных, анализируя реальный трафик на компьютере студента с помощью бесплатно распространяемой утилиты Wireshark.

В процессе выполнения домашнего задания выполняются наблюдения за передаваемым трафиком с компьютера пользователя в Интернет и в обратном направлении. Применение специализированной утилиты Wireshark позволяет наблюдать структуру передаваемых кадров, пакетов и сегментов данных различных сетевых протоколов. При выполнении УИР рекомендуется выполнить анализ последовательности команд и определить назначение служебных данных, используемых для организации обмена данными в протоколах: ARP, DNS, FTP, HTTP, DHCP.

## 2. Теоретическая справка

Процесс передачи данных по компьютерным сетям является сложным комплексом процедур, выполняемых с применением большого количества разнообразных программных и аппаратных средств. Для упрощения анализа и проектирования таких сложных систем, общепринятой практикой является декомпозиция сложного процесса на модули и/или иерархические структуры.

Обычно целью декомпозиции является получение таких модулей, которые выполняют отведённые им функции изолированно от других модулей, передавая соседним модулям лишь конечные результаты работы. Это позволяет рассматривать и проектировать модули независимо друг от друга различным, не связанным друг с другом группам инженеров, каждая из которых обладает узкой квалификацией, необходимой для реализации конкретного модуля. Кроме этого, система, обладающая модульной структурой, позволяет при необходимости модифицировать внутреннюю реализацию отдельных модулей, не изменяя что-либо в соседних модулях.

В компьютерных сетях общепринятой моделью декомпозиции процесса передачи данных является OSI-модель, разработанная международной организацией по стандартизации. OSI означает «Open Systems Interconnection», т.е. взаимодействие открытых систем. Модель OSI определяет 7 модулей, называемых уровнями (layer), каждый из которых описывает реализацию некоторого множества родственных сетевых операций, которые выполняет ЭВМ, начиная от момента получения данных от пользователя и заканчивая отправлением физического сигнала в сеть.

После выполнения сетевых функций некоторого уровня его результаты могут быть переданы только соседним уровням. Результатами являются закодированные блоки данных, называемые PDU (протокольные блоки данных). Обычно при движении PDU по OSI-модели от «пользователя» в «сеть» каждый уровень дополняет полученный PDU своими служебными данными, формирующими заголовок, и в некоторых случаях – концевик.

При движении PDU по OSI-модели в обратном направлении (т.е. из «сети» к «пользователю») каждый уровень сначала использует одноимённые служебные данные для выполнения заданной сетевой функции, а затем «отстёгивает» заголовок при передаче следующему уровню. Описанный подход гарантирует невмешательство уровней в работу друг друга, обеспечивая хорошую «модульность» процесса, однако предполагает достаточно большое количество служебных данных, которые могут дублироваться на разных уровнях, что увеличивает накладные расходы на передачу полезных.

В некоторых случаях правила уровня могут накладывать ограничения на размер PDU, который может быть корректно обработан уровнем. В этом случае при попытке передать PDU большего размера, PDU будет либо отвергнут с сообщением об ошибке, либо будет фрагментирован на несколько частей, каждая из которых будет передана независимо. При использовании фрагментирования требуется, чтобы принимающая фрагменты сторона могла соединить фрагменты воедино.

Рассмотрим каждый из 7 уровней OSI-модели более подробно.

Прикладной уровень (Application Layer, L7) описывает процесс выполнения пользовательских приложений и организацию обмена данными при работе с сетью, при этом все нижележащие уровни скрыты от пользователя. Этот уровень имеет нечёткие границы, так как может описывать не только функции сетевого приложения, но и возможные действия пользователя. На уровне L7 может описываться:

- авторизация и аутентификация пользователя;
- контроль целостности конечных пользовательских данных, которые были получены из сети;
- синхронизация действий или файлов пользователей, взаимодействующих по сети (например, при совместном редактировании файла несколькими пользователями), а также любая из функций уровней L2-L6, если она не была реализована на L2-L6, либо была реализована не в полном соответствии с потребностями приложения или пользователя.

Уровень представления (Presentation Layer, L6) описывает формат взаимодействия, в котором будут представлены данные пользователя при передаче по сети. На этом уровне могут описываться:
- процедура согласования формата представления данных на этапе установки соединения (например, выбор UTF-8 для кодирования текста пользователя или выбор алгоритма сжатия и его параметров и т.п.);
- правила изменения текущего формата представления данных в некотором уже установленном соединении (например, изменение кодека, сжимающего аудиопоток во время VoIP-разговора, при обнаружении перегрузки канала связи);
- описание синтаксиса выбранного формата представления данных, если он не является общеизвестным стандартом и не может быть описан простой ссылкой на стандарт (например, новый патентованный алгоритм сжатия или особый порядок следования байтов).

Сеансовый уровень (Session Layer, L5) описывает процесс установки, разрыва и поддержания соединений. На этом уровне может описываться:
- процедура установки соединения и согласования параметров соединения (например, требований по обеспечению качества обслуживания QoS – Quality of Service), при этом фактическая реализация запрошенных требований осуществляется на уровне L4;
- процедура разрыва соединения как при явном запросе пользователя, так при получении от L4 сообщения о невозможности выполнить запрошенные требования QoS (может быть описан штатный разрыв без потери данных пользователя и/или быстрый «жёсткий» сброс соединения с риском потери данных);
- процедура (ре)синхронизации состояния соединения (соединение может рассинхронизироваться при возникновении ошибок в сети, при переводе часов, при выходе за границу окна передачи и т.п.).

Транспортный уровень (Transport Layer, L4) описывает процесс передачи данных по сети «из конца в конец» (end-to-end), при этом с точки зрения пользователя все промежуточные сетевые устройства между абонентами рассматриваются как единый «черный ящик». На этом уровне может описываться: